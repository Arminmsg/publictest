<div class="grid gap-4 justify-items-center text-gray-500">
  <div class="flex">
    <div class="flex-auto">
      <div class="border-4 rounded-lg p-2 m-4">
          <h4 class="text-lg font-bold">Get the Podcast</h4>
          <p class="mt-1">
              Available on <a href="https://podcasts.apple.com/us/podcast/results-junkies/id1589878514" class="underline" target="_blank">Apple</a>, <a href="https://podcasts.google.com/feed/aHR0cHM6Ly9mZWVkcy5zaW1wbGVjYXN0LmNvbS8wbDlSTjJZZg" class="underline" target="_blank">Google</a>, <a href="https://open.spotify.com/show/5D9k65D3VoDIBMzy4lFm19?si=lZfewRl6QYeX56eHI_1Q6Q&nd=1" class="underline" target="_blank">Spotify</a> or <a href="https://www.resultsjunkies.com/podcast?utm_source=North%2BStar&utm_medium=New%2BTab&utm_campaign=Flex%2BBox" class="underline" target="_blank">your inbox</a>.
          </p>
      </div>
    </div>
    <div class="flex-auto">
      <div class="border-4 rounded-lg p-2 m-4">
          <h4 class="text-lg font-bold">Get in Touch</h4>
          <p class="mt-1">
              Feature requests, bug reports and other ideas. <a href="mailto:paul@resultsjunkies.com?subject=Let's talk about North Star." class="underline">Let's talk.</a>
          </p>
      </div>
    </div>
    <div class="flex-auto" id="stats"></div>
  </div>
</div>
<img src="https://api.resultsjunkies.com/noscript.gif?hostname=northstar.resultsjunkies.com&path=%2Fnewtab" alt="" referrerpolicy="no-referrer-when-downgrade" />

<script>
  function appendDataToHTML(data) {
    const html =
      '<div class="flex-auto">' +
        '<div class="border-4 rounded-lg p-2 m-4">' +
          '<h4 class="text-lg font-bold">Stats</h4>' +
            '<p class="mt-1">' +
                '<b>'+ data.pageviews + '</b> others viewed their stats recently.' +
            '</p>' +
        '</div>' +
      '</div>';

    document.getElementById("stats").innerHTML = html;
  }
  
  function getStats() {
    fetch('https://simpleanalytics.com/northstar.resultsjunkies.com.json?version=5&fields=pageviews')
      .then(function (response) {
        return response.json(); // response type (json)
      })

      .then(function (data) {
        appendDataToHTML(data); // function that appends data to HTML
      })

      .catch(function (err) {
        console.log(err);
      });
  }

  if (window.addEventListener) {
    window.addEventListener('load', getStats, false);
  } else if (window.attachEvent) {
    window.attachEvent('onload', getStats);
  } else {
    window.onload = getStats;
  }
  </script>
